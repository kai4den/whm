{"version":3,"sources":["App/Links.tsx","App/distance-label.ts","App/Shop.tsx","App/addMarkers.ts","App/setCluster.ts","App/hideLayers.ts","lib/hash.ts","App/toGeoJson.ts","App/Map.tsx","App/Home.tsx","App/ShopListItem.tsx","App/List.tsx","geolocation.ts","App/AboutUs.tsx","App/Category.tsx","App/Images.tsx","App/Tabbar.tsx","App.tsx","Qrcode.tsx","App/Share.tsx","About.tsx","Container.tsx","serviceWorkerRegistration.ts","index.tsx"],"names":["noop","e","stopPropagation","Content","props","className","data","href","onClick","size","makeDistanceLabelText","distance","distanceTipText","Number","isNaN","Math","round","mapNode","React","useRef","useState","map","setMap","shop","clickHandler","close","current","remove","useEffect","nextMap","window","geolonia","Map","container","interactive","zoom","style","category","content","contentHtml","Autolinker","link","replace","color","to","margin","src","alt","width","dangerouslySetInnerHTML","__html","ref","height","marginTop","addMarkers","mapObject","geojson","setShop","getSource","addSource","type","cluster","clusterMaxZoom","clusterRadius","getLayer","addLayer","id","source","filter","paint","layout","on","getCanvas","cursor","event","features","properties","setCluster","queryRenderedFeatures","point","layers","clusterId","cluster_id","getClusterExpansionZoom","err","easeTo","center","geometry","coordinates","hideLayers","i","length","layerId","setLayoutProperty","parseHash","url","qstr","location","hash","substring","URLSearchParams","toGeoJson","item","feature","_id","Object","keys","key","push","CSS","position","setMapObject","undefined","zLatLngString","setZLatLngString","onMapLoad","orienteationchangeHandler","resize","addEventListener","removeEventListener","off","zxyHash","get","zlatlng","split","lat","lng","getZXYHash","flyTo","speed","bounds","geojsonExtent","fitBounds","padding","getCenter","rawZoom","getZoom","precision","ceil","LN2","log","LN10","m","pow","zStr","getCenterZXY","q","set","toString","popupHandler","image","isCategoryPage","queryCategory","sortShopList","shopList","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","error","enableHighAccuracy","timeout","maximumAge","currentPosition","from","turf","sortingShopList","parseFloat","units","sort","a","b","setData","list","setList","page","setPage","hasMore","setHasMore","useSearchParams","isMounted","then","sortedData","slice","loader","textAlign","top","dataLength","next","scrollableTarget","index","formUrl","config","form_url","process","target","rel","navigate","useNavigate","categoryList","setCategoryList","categories","indexOf","htmlFor","onChange","value","options","label","validImageList","setValidImageList","imageListItems","ImageListItem","loading","onError","parentNode","ImageList","sx","cols","rowHeight","item1","item2","Date","parse","App","setShopList","fetch","data_url","response","ok","text","status","records","columns","sortedRecords","path","element","Home","Qrcode","Canvas","useQRCode","TwitterShareButton","hashtags","title","TwitterIcon","FacebookShareButton","hashtag","FacebookIcon","LineShareButton","LineIcon","logoUrl","logo_image_url","description","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","URL","origin","headers","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.374c3434.chunk.js","sourcesContent":["import React from \"react\";\nimport { FaTwitter, FaInstagram, FaFacebook, FaHome } from 'react-icons/fa';\n\nimport './Links.scss'\n\ntype Props = {\n  data: Pwamap.ShopData;\n};\n\nconst noop = (e: React.MouseEvent) => {\n  e.stopPropagation()\n}\n\nconst Content = (props: Props) => {\n\n  return (\n    <div className=\"links\">\n      {props.data['Instagram']?<div className=\"link\"><a href={`https://instagram.com/${props.data['Instagram']}`}><FaInstagram onClick={noop} size=\"20px\" /></a></div>:''}\n      {props.data['Twitter']?<div className=\"link\"><a href={`https://twitter.com/${props.data['Twitter']}`}><FaTwitter onClick={noop} size=\"20px\" /></a></div>:''}\n      {props.data['Facebook'] ? <div className=\"link\"><a href={`https://www.facebook.com/${props.data['Facebook']}`}><FaFacebook onClick={noop} size=\"20px\" /></a></div> : ''}\n      {props.data['公式サイト']?<div className=\"link\"><a href={props.data['公式サイト']}><FaHome onClick={noop} size=\"20px\" /></a></div>:''}\n    </div>\n  );\n};\n\nexport default Content;\n","export const makeDistanceLabelText = (distance: number | void) => {\n  let distanceTipText = \"\"\n  if(typeof distance === 'number' && !Number.isNaN(distance)) {\n    if(distance > 1000) {\n      distanceTipText = Math.round(distance / 1000) + ' km'\n    } else {\n      distanceTipText = Math.round(distance) + ' m'\n    }\n  }\n  return distanceTipText\n}\n","import React from \"react\";\nimport Links from './Links'\nimport './Shop.scss'\nimport { AiOutlineClose } from 'react-icons/ai'\nimport { Link } from \"react-router-dom\";\nimport { makeDistanceLabelText } from \"./distance-label\";\nimport Autolinker from 'autolinker';\n\ntype Props = {\n  shop: Pwamap.ShopData;\n  close: Function;\n}\n\nconst Content = (props: Props) => {\n  const mapNode = React.useRef<HTMLDivElement>(null);\n  const [map, setMap] = React.useState<any>(null)\n  const { shop } = props\n\n  const clickHandler = () => {\n    props.close()\n    if(mapNode.current) {\n      mapNode.current.remove()\n      map.remove()\n    }\n  }\n\n  React.useEffect(() => {\n    if (!mapNode.current) {\n      return\n    }\n\n    // @ts-ignore\n    const nextMap = new window.geolonia.Map({\n      container: mapNode.current,\n      interactive: false,\n      zoom: 14,\n      style: `geolonia/gsi`,\n    });\n    setMap(nextMap)\n  }, [shop, mapNode])\n\n  const distanceTipText = makeDistanceLabelText(shop.distance)\n  const category = shop['カテゴリ']\n  const content = shop['紹介文']\n\n  const toBreakLine = (text: string) => {\n    return text.replace(/\\r?\\n/g, '<br/>');\n  }\n\n  const contentHtml = Autolinker.link(toBreakLine(content))\n\n  return (\n    <div className=\"shop-single\">\n      <div className=\"head\">\n        <button onClick={clickHandler}><AiOutlineClose size=\"16px\" color=\"#FFFFFF\" /> 閉じる</button>\n      </div>\n      <div className=\"container\">\n        {shop?\n          <>\n            <h2>{shop['スポット名']}</h2>\n            <div>\n              <span className=\"nowrap\">\n                <Link to={`/list?category=${category}`}>\n                  <span onClick={clickHandler} className=\"category\">{category}</span>\n                </Link>\n              </span>\n              <span className=\"nowrap\">{distanceTipText && <span className=\"distance\">現在位置から {distanceTipText}</span> }</span>\n            </div>\n\n            <div style={{margin: \"24px 0\"}}><Links data={shop} /></div>\n\n            { shop['画像'] && <img src={shop['画像']} alt={shop['スポット名']} style={{width: \"100%\"}} />}\n\n            <div data-vc_mylinkbox_id=\"888006023\"></div>\n\n            <p\n              style={{margin: \"24px 0\"}}\n              dangerouslySetInnerHTML={{\n                __html: contentHtml\n              }}\n            />\n\n            <div\n              ref={mapNode}\n              style={{width: '100%', height: '200px', marginTop: \"24px\"}}\n              data-lat={shop['緯度']}\n              data-lng={shop['経度']}\n              data-navigation-control=\"off\"\n            ></div>\n\n            <p><a className=\"small\" href={`http://maps.apple.com/?q=${shop['緯度']},${shop['経度']}`}>スポットまでの道順</a></p>\n\n          </>\n          :\n          <></>\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default Content;\n","const textColor = '#000000'\nconst textHaloColor = '#FFFFFF'\n\nconst addMarkers = (mapObject: any, geojson: any, setShop: any) => {\n\n  // nothing to do if shops exists.\n  if (mapObject.getSource('shops')) {\n    return\n  }\n\n  mapObject.addSource('shops', {\n    type: 'geojson',\n    data: geojson,\n    cluster: true,\n    clusterMaxZoom: 14,\n    clusterRadius: 25,\n  })\n\n  if (\n    mapObject.getLayer('shop-points') &&\n    mapObject.getLayer('shop-symbol')\n  ) {\n    return\n  }\n\n  mapObject.addLayer({\n    id: 'shop-points',\n    type: 'circle',\n    source: 'shops',\n    filter: ['all',\n      ['==', '$type', 'Point'],\n    ],\n    paint: {\n      'circle-radius': 13,\n      'circle-color': '#FF0000',\n      'circle-opacity': 0.4,\n      'circle-stroke-width': 2,\n      'circle-stroke-color': '#FFFFFF',\n      'circle-stroke-opacity': 1,\n    },\n  })\n\n  mapObject.addLayer({\n    id: 'shop-symbol',\n    type: 'symbol',\n    source: 'shops',\n    filter: ['all',\n      ['==', '$type', 'Point'],\n    ],\n    paint: {\n      'text-color': textColor,\n      'text-halo-color': textHaloColor,\n      'text-halo-width': 2,\n    },\n    layout: {\n      'text-field': \"{スポット名}\",\n      'text-font': ['Noto Sans Regular'],\n      'text-variable-anchor': ['top', 'bottom', 'left', 'right'],\n      'text-radial-offset': 0.5,\n      'text-justify': 'auto',\n      'text-size': 12,\n      'text-anchor': 'top',\n      'text-max-width': 12,\n      'text-allow-overlap': false,\n    },\n  })\n\n  mapObject.on('mouseenter', 'shop-points', () => {\n    mapObject.getCanvas().style.cursor = 'pointer'\n  })\n\n  mapObject.on('mouseleave', 'shop-points', () => {\n    mapObject.getCanvas().style.cursor = ''\n  })\n\n  mapObject.on('mouseenter', 'shop-symbol', () => {\n    mapObject.getCanvas().style.cursor = 'pointer'\n  })\n\n  mapObject.on('mouseleave', 'shop-symbol', () => {\n    mapObject.getCanvas().style.cursor = ''\n  })\n\n  mapObject.on('click', 'shop-points', (event: any) => {\n    if (!event.features[0].properties.cluster) {\n      setShop(event.features[0].properties)\n    }\n  })\n\n  mapObject.on('click', 'shop-symbol', (event: any) => {\n    if (!event.features[0].properties.cluster) {\n      setShop(event.features[0].properties)\n    }\n  })\n\n}\n\nexport default addMarkers\n","const setCluster = (map: any) => {\n\n  if (\n    !map.getSource('shops') &&\n    map.getLayer('clusters') &&\n    map.getLayer('cluster-count')\n  ) {\n    return;\n  }\n\n  map.addLayer({\n    id: 'clusters',\n    type: 'circle',\n    source: 'shops',\n    filter: ['has', 'point_count'],\n    paint: {\n      'circle-radius': 20,\n      'circle-color': '#FF0000',\n      'circle-opacity': 1.0,\n    },\n  })\n\n  map.addLayer({\n    id: 'cluster-count',\n    type: 'symbol',\n    source: 'shops',\n    filter: ['has', 'point_count'],\n    paint: {\n      'text-color': '#FFFFFF',\n    },\n    layout: {\n      'text-field': '{point_count_abbreviated} 件',\n      'text-size': 12,\n      'text-font': ['Noto Sans Regular'],\n    },\n  })\n\n  map.on('click', 'clusters', (e: any) => {\n    const features = map.queryRenderedFeatures(e.point, { layers: ['clusters'] })\n    const clusterId = features[0].properties.cluster_id\n    map.getSource('shops').getClusterExpansionZoom(clusterId, (err: any, zoom: number) => {\n      if (err)\n        return\n\n      map.easeTo({\n        center: features[0].geometry.coordinates,\n        zoom: zoom,\n      })\n    })\n  })\n\n  map.on('mouseenter', 'clusters', function () {\n    map.getCanvas().style.cursor = 'pointer'\n  })\n\n  map.on('mouseleave', 'clusters', function () {\n    map.getCanvas().style.cursor = ''\n  })\n}\n\nexport default setCluster;\n","const hideLayers = (map: any) => {\n\n  const hideLayers = [\n    'poi',\n    'poi-primary',\n    'poi-r0-r9',\n    'poi-r10-r24',\n    'poi-r25',\n    'poi-bus',\n    'poi-entrance',\n  ]\n\n  for (let i = 0; i < hideLayers.length; i++) {\n    const layerId = hideLayers[i];\n    map.setLayoutProperty(layerId, 'visibility', 'none')\n  }\n}\n\nexport default hideLayers;\n","export const parseHash = (url?: Location | URL) => {\n  const qstr = (url || window.location).hash.substring(2);\n  const q = new URLSearchParams(qstr);\n  return q;\n};\n\nexport const updateHash = (q: URLSearchParams) => {\n\n  const hash = q.toString();\n  if (hash) {\n    window.location.hash = `#/?${q.toString().replace(/%2F/g, '/')}`;\n  }\n};\n\nexport const getZXYHash = () => {\n\n  const hash = parseHash();\n  if (hash && hash.get('map')) {\n\n    const latLngString = hash.get('map') || '';\n    const zlatlng = latLngString.split('/');\n\n    const zoom = zlatlng[0]\n    const lat = zlatlng[1]\n    const lng = zlatlng[2]\n\n    return {zoom, lat, lng}\n  } else {\n    return null\n  }\n}\n\nexport const getCenterZXY = (mapObject: any) => {\n  // see: https://github.com/maplibre/maplibre-gl-js/blob/ba7bfbc846910c5ae848aaeebe4bde6833fc9cdc/src/ui/hash.js#L59\n  const center = mapObject.getCenter(),\n  rawZoom = mapObject.getZoom(),\n  zoom = Math.round(rawZoom * 100) / 100,\n  // derived from equation: 512px * 2^z / 360 / 10^d < 0.5px\n  precision = Math.ceil((zoom * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10),\n  m = Math.pow(10, precision),\n  lng = Math.round(center.lng * m) / m,\n  lat = Math.round(center.lat * m) / m,\n  zStr = Math.ceil(zoom);\n  return {zStr, lat, lng}\n}\n","type Geometry = {\n  type: string;\n  coordinates: number[]\n}\n\ntype featureProperties = {\n  [key: string]: string;\n}\n\ntype Feature = {\n  type: string;\n  geometry: Geometry;\n  properties: featureProperties\n}\n\ntype itemObject = {\n  [key: string]: any;\n}\n\ntype GeoJSON = {\n  type: string;\n  features: Feature[]\n}\n\nconst toGeoJson = (data: any) => {\n  const geojson = {\n    type: \"FeatureCollection\",\n    features: []\n  } as GeoJSON\n\n  for (const id in data) {\n    const item = data[id] as itemObject\n\n    if (!item['経度'] || !item['緯度'] || !item['スポット名']) {\n      return;\n    }\n\n    const feature = {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [Number(item['経度']), Number(item['緯度'])]\n      },\n      properties: {_id: id}\n    } as Feature\n\n    for (let i = 0; i < Object.keys(item).length; i++) {\n      const key = Object.keys(item)[i]\n      feature.properties[key] = item[key]\n    }\n\n    geojson.features.push(feature)\n  }\n\n  return geojson\n}\n\nexport default toGeoJson;\n","import { useState, useEffect, useRef, CSSProperties} from \"react\";\nimport Shop from './Shop'\nimport  addMarkers from './addMarkers'\nimport setCluster from './setCluster'\nimport hideLayers from './hideLayers'\nimport { parseHash, updateHash, getZXYHash, getCenterZXY } from '../lib/hash'\nimport toGeoJson from './toGeoJson'\n// @ts-ignore\nimport geojsonExtent from '@mapbox/geojson-extent'\n\ntype Props = {\n  data: Pwamap.ShopData[];\n};\n\nconst CSS: CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'relative',\n}\n\nconst Content = (props: Props) => {\n  const mapNode = useRef<HTMLDivElement>(null);\n  const [mapObject, setMapObject] = useState<any>()\n  const [shop, setShop] = useState<Pwamap.ShopData | undefined>(undefined)\n  const [ zLatLngString, setZLatLngString ] = useState<string>('');\n\n  useEffect(() => {\n    // Only once reder the map.\n    if (!mapNode.current || mapObject) {\n      return\n    }\n\n    // @ts-ignore\n    const { geolonia } = window;\n\n    const map = new geolonia.Map({\n      container: mapNode.current,\n      style: 'geolonia/gsi',\n    });\n\n    const onMapLoad = () => {\n      hideLayers(map)\n      setMapObject(map)\n    }\n\n    const orienteationchangeHandler = () => {\n      map.resize()\n    }\n\n    // attach\n    map.on('load', onMapLoad)\n\n    window.addEventListener('orientationchange', orienteationchangeHandler)\n\n    return () => {\n      // detach to prevent memory leak\n      window.removeEventListener('orientationchange', orienteationchangeHandler)\n      map.off('load', onMapLoad)\n    }\n  }, [mapNode, mapObject, props.data])\n\n\n  // マーカーとクラスターを追加\n  useEffect(() => {\n\n    if (!mapObject || !props.data || props.data.length === 0) {\n      return\n    }\n\n    const geojson = toGeoJson(props.data)\n\n    addMarkers(mapObject, geojson, setShop)\n    setCluster(mapObject)\n\n    // もしハッシュがあれば、そこに移動する\n    const zxyHash = getZXYHash();\n    if (zxyHash) {\n\n      const { zoom, lat, lng } = zxyHash\n      mapObject.flyTo({ center: [lng, lat], zoom, speed: 3 });\n\n    } else {\n      // ハッシュがなければ、データの範囲に移動する\n      const bounds = geojsonExtent(geojson)\n      mapObject.fitBounds(bounds, { padding: 50 })\n    }\n\n    // 地図の移動が終わったらハッシュを更新\n    mapObject.on('moveend', () => {\n      const { zStr, lng, lat } = getCenterZXY(mapObject)\n      setZLatLngString(`${zStr}/${lat}/${lng}`);\n    });\n\n  }, [mapObject, props.data])\n\n  // 地図が移動したらハッシュを更新\n  useEffect(() => {\n    const hash = parseHash();\n    if (zLatLngString) {\n      hash.set('map', zLatLngString);\n    }\n    updateHash(hash);\n\n  }, [ zLatLngString ]);\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n  return (\n    <div style={CSS}>\n      <div\n        ref={mapNode}\n        style={CSS}\n        data-geolocate-control=\"on\"\n        data-marker=\"off\"\n        data-gesture-handling=\"off\"\n      ></div>\n      {shop ?\n        <Shop shop={shop} close={closeHandler} />\n        :\n        <></>\n      }\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport Map from \"./Map\"\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n  return (\n    <><Map data={props.data} /></>\n  );\n};\n\nexport default Content;\n","import { BsChevronCompactRight } from 'react-icons/bs'\nimport './ShopListItem.scss'\nimport { Link } from \"react-router-dom\";\nimport { makeDistanceLabelText } from \"./distance-label\";\n\ntype Props = {\n  data: Pwamap.ShopData;\n  popupHandler: Function;\n  queryCategory: string | null;\n};\n\nconst Content = (props: Props) => {\n  const clickHandler = () => {\n    props.popupHandler(props.data)\n  }\n\n  const distanceTipText = makeDistanceLabelText(props.data.distance)\n  const category = props.data['カテゴリ']\n  const image = props.data['画像']\n\n  const isCategoryPage = props.queryCategory ? true :false\n\n  return (\n    <>\n      <div className=\"shop-link\">\n        <h2 className=\"shop-title\" onClick={clickHandler}>{props.data['スポット名']}</h2>\n        <div className='tag-box'>\n          {\n            !isCategoryPage &&\n            <span className=\"nowrap\">\n              <Link to={`/list?category=${category}`}>\n                <span className=\"category\">{category}</span>\n              </Link>\n            </span>\n          }\n          <span className=\"nowrap\">{distanceTipText && <span className=\"distance\">現在位置から {distanceTipText}</span>}</span>\n        </div>\n\n        <div style={{ margin: \"10px 10px 10px 0\" }}>\n\n          { image && <img src={image} alt={props.data['スポット名']} onClick={clickHandler}/>}\n\n        </div>\n\n        <div className=\"right\" onClick={clickHandler}><BsChevronCompactRight size=\"40px\" color=\"#CCCCCC\" /></div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport ShopListItem from './ShopListItem'\nimport Shop from './Shop'\nimport './List.scss'\nimport { useSearchParams } from \"react-router-dom\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { askGeolocationPermission } from '../geolocation'\nimport * as turf from \"@turf/turf\"\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst sortShopList = async (shopList: Pwamap.ShopData[]) => {\n  const currentPosition = await askGeolocationPermission()\n  if(currentPosition) {\n    const from = turf.point(currentPosition);\n    const sortingShopList = shopList.map((shop) => {\n      const lng = parseFloat(shop['経度'])\n      const lat = parseFloat(shop['緯度'])\n      if(Number.isNaN(lng) || Number.isNaN(lat)) {\n        return shop\n      } else {\n        const to = turf.point([lng, lat])\n        const distance = turf.distance(from, to, {units: 'meters' as 'meters'});\n        return { ...shop, distance }\n      }\n    })\n    sortingShopList.sort((a,b) => {\n      if(typeof a.distance !== 'number' || Number.isNaN(a.distance)) {\n        return 1\n      } else if (typeof b.distance !== 'number' || Number.isNaN(b.distance)) {\n        return -1\n      } else {\n        return a.distance - b.distance\n      }\n    })\n    return sortingShopList\n  } else {\n    return shopList\n  }\n}\n\nconst Content = (props: Props) => {\n\n  const [shop, setShop] = React.useState<Pwamap.ShopData | undefined>()\n  const [data, setData] = React.useState<Pwamap.ShopData[]>(props.data)\n  const [list, setList] = React.useState<any[]>([]);\n  const [page, setPage] = React.useState(10);\n  const [hasMore, setHasMore] = React.useState(true);\n\n  const [searchParams] = useSearchParams();\n  const queryCategory = searchParams.get('category')\n\n  React.useEffect(() => {\n\n    let data = props.data;\n\n    if (queryCategory) {\n      data = props.data.filter((shop) => {\n        return shop['カテゴリ'] === queryCategory\n      })\n    }\n\n    let isMounted = true\n    // prevent memory leak\n    if (isMounted) {\n\n      const orderBy = process.env.REACT_APP_ORDERBY || 'distance'\n\n      if (orderBy === 'distance') {\n\n        sortShopList(data)\n          .then(sortedData => {\n            // prevent memory leak\n            if (isMounted) {\n              setList(sortedData.slice(0, page))\n              setData(sortedData)\n            }\n          })\n\n      } else {\n        setList(data.slice(0, page))\n        setData(data)\n      }\n    }\n\n    return () => {\n      isMounted = false\n    }\n  }, [props.data, queryCategory, page])\n\n\n  const popupHandler = (shop: Pwamap.ShopData) => {\n    if (shop) {\n      setShop(shop)\n    }\n  }\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n    //項目を読み込むときのコールバック\n    const loadMore = () => {\n\n      //データ件数が0件の場合、処理終了\n      if (list.length >= data.length) {\n        setHasMore(false);\n        return;\n      }\n\n      setList([...list, ...data.slice(page, page + 10)])\n      setPage(page + 10)\n    }\n\n  const loader = <div\n    className=\"loader\"\n    key={0}\n    style={{\n      width: '100%',\n      height: '200px',\n      textAlign: 'center',\n      position: 'relative',\n      top: '100px'\n    }}\n  >場所一覧を読み込み中です...</div>;\n\n  return (\n    <div id=\"shop-list\" className=\"shop-list\">\n      {queryCategory && <div className=\"shop-list-category\">{`カテゴリ：「${queryCategory}」`}</div>}\n\n      <InfiniteScroll\n        dataLength={list.length}\n        next={loadMore}\n        hasMore={hasMore}\n        loader={loader}\n        scrollableTarget=\"shop-list\"\n      >\n        {\n          list.map((item, index) => {\n\n            return (<div key={index} className=\"shop\">\n              <ShopListItem\n                data={item}\n                popupHandler={popupHandler}\n                queryCategory={queryCategory}\n              />\n            </div>)\n\n          })\n        }\n      </InfiniteScroll>\n      {shop ?\n        <Shop shop={shop} close={closeHandler} />\n        :\n        <></>\n      }\n    </div>\n  );\n};\n\nexport default Content;\n","export const askGeolocationPermission = () => {\n  return new Promise<Pwamap.LngLat | null>((resolve, reject) => {\n\n    if(!window.navigator.geolocation || !window.navigator.geolocation.getCurrentPosition) {\n      resolve(null)\n    }\n\n    window.navigator.geolocation.getCurrentPosition(\n      (pos) => {\n        const lat = pos.coords.latitude\n        const lng = pos.coords.longitude\n        resolve([lng, lat])\n      },\n      (error) => {\n        resolve(null)\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      }\n    )\n  })\n}\n","import './AboutUs.scss'\nimport config from '../config.json'\nimport { FaPlus } from 'react-icons/fa';\n\n//@ts-ignore\nconst formUrl = config.form_url || null\n\nconst Content = () => {\n  const clickHandler = () => {\n    if (formUrl) {\n      window.location.href = formUrl\n    }\n  }\n\n\n  return (\n    <div className=\"about-us\">\n      <div className=\"container\">\n        <div className=\"branding\">\n          <div className=\"image\"><img src={`${process.env.PUBLIC_URL}/icon-pwamap.svg`} alt=\"\"/></div>\n          <div className=\"logo\">Geolonia PWAマップ</div>\n        </div>\n\n        <p>Geolonia PWAマップは、Google スプレッドシートを更新するだけでオリジナルの地図アプリを作成することができます。</p>\n        <p>プログラムはオープンソースで公開しているため、自由にカスタマイズしてご利用いただけます。</p>\n\n        <h2> Geolonia PWAマップについて</h2>\n        <p><a href=\"https://blog.geolonia.com/2022/05/17/pwamap-beta.html\" target='_blank' rel=\"noreferrer\">https://blog.geolonia.com/2022/05/17/pwamap-beta.html</a></p>\n\n        <p>また、独自ドメインでの利用やデザインのカスタマイズや利用に必要な緯度・経度情報の提供も有償で別途承ります。ご希望の方は下記までお問い合わせください。</p>\n\n        <h2>お問い合わせフォーム</h2>\n        <p><a href=\"https://geolonia.com/contact/\" target='_blank' rel=\"noreferrer\">https://geolonia.com/contact/</a></p>\n        <p>※カスタマイズおよびアプリの作成・利用についてはサポート対象外となります。あらかじめご了承ください。</p>\n\n        {formUrl?\n          <>\n            <h2>データの更新について</h2>\n            <p>このアプリのデータを更新するには下の「 + 」ボタンを押してフォームに必要な情報を入力してください。</p>\n            <div className=\"goto-form\"><button><FaPlus color=\"#FFFFFF\" onClick={clickHandler} /></button></div>\n          </>\n          :\n          <></>\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport Select from 'react-select'\nimport { useNavigate } from 'react-router-dom';\nimport './Category.scss'\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n\n  const navigate = useNavigate();\n\n  const [categoryList, setCategoryList] = React.useState<string[]>([]);\n\n  React.useEffect(() => {\n\n    let categories: string[] = []\n\n    for (let i = 0; i < props.data.length; i++) {\n      const shop = props.data[i];\n\n      if (categories.indexOf(shop['カテゴリ']) === -1) {\n\n        categories.push(shop['カテゴリ'])\n      }\n\n    }\n\n    setCategoryList(categories)\n\n  }, [props.data])\n\n\n  return (\n    <>\n      <div className=\"head\"></div>\n      <div className=\"category\">\n        <div className=\"container\">\n          <div className=\"category-item\">\n            <label htmlFor=\"category-select\">カテゴリから選ぶ</label>\n            <Select\n              onChange={(e) => {\n                if (e) {\n                  navigate(`/list?category=${e.value}`);\n                }\n              }}\n              options={\n                categoryList.map(category => {\n                  return {\n                    value: category,\n                    label: category\n                  }\n                })\n              }\n            />\n          </div>\n\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import { useEffect, useState } from 'react'\nimport { ImageList, ImageListItem } from '@material-ui/core'\nimport Shop from './Shop'\nimport './Images.scss'\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n\n  const { data } = props;\n  const [validImageList, setValidImageList ] = useState<JSX.Element[]>([]);\n  const [shop, setShop] = useState<Pwamap.ShopData | undefined>()\n\n  const popupHandler = (shop: Pwamap.ShopData) => {\n    if (shop) {\n      setShop(shop)\n    }\n  }\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n  useEffect(() => {\n\n    let imageListItems = []\n\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n\n      if (item['画像']) {\n\n        imageListItems.push(\n          <ImageListItem\n            key={i}\n            className=\"mui-image-list-item\"\n          >\n            <img\n              src={item['画像']}\n              alt={item['スポット名']}\n              loading=\"lazy\"\n              onClick={() => popupHandler(item)}\n              onError={e => {\n                //@ts-ignore\n                e.target.parentNode.remove()\n              }}\n            />\n          </ImageListItem>\n        )\n      }\n    }\n\n    setValidImageList(imageListItems)\n\n  }, [data])\n\n  return (\n    <>\n      <div className=\"head\"></div>\n      <div className=\"images\">\n        <div className=\"container\">\n          <ImageList id=\"mui-image-list\" sx={{ width: \"100%\", height: \"100%\" }} cols={2} rowHeight={164}>\n            {validImageList}\n          </ImageList>\n          {shop ?\n            <Shop shop={shop} close={closeHandler} />\n            :\n            <></>\n          }\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport './Tabbar.scss'\n\nimport { FaList, FaHome, FaSearch, FaCamera } from \"react-icons/fa\"\nimport { AiOutlineAppstore } from \"react-icons/ai\"\n\nconst Content = () => {\n  return (\n    <div className=\"tabbar\">\n      <ul>\n        <li><Link to=\"/\"><div className=\"icon\"><FaHome /></div><div className=\"text\">ホーム</div></Link></li>\n        <li><Link to=\"/list\"><div className=\"icon\"><FaList /></div><div className=\"text\">一覧</div></Link></li>\n        <li><Link to=\"/category\"><div className=\"icon\"><FaSearch /></div><div className=\"text\">カテゴリ</div></Link></li>\n        <li><Link to=\"/images\"><div className=\"icon\"><FaCamera /></div><div className=\"text\">写真から探す</div></Link></li>\n        <li><Link to=\"/about\"><div className=\"icon\"><AiOutlineAppstore /></div><div className=\"text\">マップについて</div></Link></li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\n//@ts-ignore\nimport { parse } from 'csv-parse/dist/esm/sync';\nimport \"./App.scss\";\n\nimport Home from './App/Home'\nimport List from './App/List'\nimport AboutUs from './App/AboutUs'\nimport Category from './App/Category'\nimport Images from './App/Images'\n\nimport Tabbar from './App/Tabbar'\nimport config from './config.json'\n\nconst sortShopList = async (shopList: Pwamap.ShopData[]) => {\n\n  // 新着順にソート\n  return shopList.sort(function (item1, item2) {\n    return Date.parse(item2['タイムスタンプ']) - Date.parse(item1['タイムスタンプ'])\n  });\n\n}\n\nconst App = () => {\n  const [shopList, setShopList] = React.useState<Pwamap.ShopData[]>([])\n\n  React.useEffect(() => {\n    fetch(`${config.data_url}`)\n      .then((response) => {\n        return response.ok ? response.text() : Promise.reject(response.status);\n      })\n      .then((data) => {\n\n        let records = parse(data, {\n          columns: true,\n        });\n\n        sortShopList(records).then((sortedRecords) => {\n          setShopList(sortedRecords)\n        })\n\n      });\n  }, [])\n\n  return (\n    <div className=\"app\">\n      <div className=\"app-body\">\n        <Routes>\n          <Route path=\"/\" element={<Home data={shopList} />} />\n          <Route path=\"/list\" element={<List data={shopList} />} />\n          <Route path=\"/category\" element={<Category data={shopList} />} />\n          <Route path=\"/images\" element={<Images data={shopList} />} />\n          <Route path=\"/about\" element={<AboutUs />} />\n        </Routes>\n      </div>\n      <div className=\"app-footer\">\n        <Tabbar />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { useQRCode } from 'next-qrcode';\n\nfunction Qrcode(props: { url: string }) {\n\n  const { url } = props;\n  const { Canvas } = useQRCode();\n\n  return (\n    <Canvas\n      text={url}\n      options={{\n        type: 'image/png',\n        margin: 0,\n        width: 128\n      }}\n    />\n  );\n}\n\nexport default Qrcode;\n","import React from \"react\";\nimport { FacebookShareButton, LineShareButton, TwitterShareButton } from \"react-share\";\nimport { FacebookIcon, LineIcon, TwitterIcon } from \"react-share\";\nimport config from '../config.json'\n\nimport './Share.scss'\n\nconst Content = () => {\n  const url = window.location.href.replace(/\\?.+$/, '').replace(/#.+$/, '')\n\n  return (\n    <div className=\"share\">\n      <ul>\n        <li><a href=\"/\"><TwitterShareButton url={url} hashtags={[`${config.title}`]} title={`${config.title}`}><TwitterIcon size={32} round={true} /></TwitterShareButton></a></li>\n        <li><a href=\"/\"><FacebookShareButton url={url} hashtag={`#${config.title}`}><FacebookIcon size={32} round={true} /></FacebookShareButton></a></li>\n        <li><a href=\"/\"><LineShareButton url={url} title={`${config.title}`}><LineIcon size={32} round={true} /></LineShareButton></a></li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport './About.scss'\nimport Qrcode from './Qrcode'\nimport Share from './App/Share'\nimport config from './config.json'\n\nconst Content = () => {\n\n  //@ts-ignore\n  const logoUrl = config.logo_image_url || `${process.env.PUBLIC_URL}/logo.svg`\n\n  return (\n    <div className=\"about\">\n      <div className=\"branding\">\n        <img className=\"image\" src={logoUrl} alt=\"\"/>\n      </div>\n\n      <div className=\"description\">{config.description}</div>\n      <div className=\"qrcode\"><Qrcode url={window.location.href}/></div>\n      <Share />\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\n\nimport App from './App'\nimport About from './About'\nimport './Container.scss'\n\nfunction Content() {\n  return (\n    <div className=\"outer-container\">\n      <div className=\"inner-container\">\n        <About />\n        <App />\n      </div>\n    </div>\n  );\n}\n\nexport default Content;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from \"react-router-dom\";\nimport Container from './Container';\nimport './index.scss'\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Container />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}